<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Navigation bar title-->
    <title>Explore</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, text/html, charset=UTF-8"
    />
    <link href="static/bootstrap.min.css" rel="stylesheet" media="screen" />
    <link rel="stylesheet" href="static/css/custom.css" />
    <link rel="stylesheet" href="static/css/card.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/fontawesome.min.css"
    />
    <!-- Development -->
    <link rel="stylesheet" href="../static/css/all.css" />
  </head>
  <body>
    <br />
    <div id="holder">
      <div id="body">
        <div class="container">
          <div class="row text-center">
            <div class="col-xs-1 col-sm-1 col-md-4 col-lg-4 col-xl-4"></div>
            <div class="col-xs-10 col-sm-10 col-md-4 col-lg-4 col-xl-4">
              <div class="row text-center">
                <div class="col">
                  <p><a href="/">Home</a></p>
                </div>
                <div class="col">
                  <p><a href="/explore">Back</a></p>
                </div>
              </div>
            </div>
            <div class="col-xs-1 col-sm-1 col-md-4 col-lg-4 col-xl-4"></div>
          </div>
          {% if not boulder_list %}
          <br />
          <br />
          <div class="d-flex justify-content-center">
            <h5>No boulders matching the specified criteria</h5>
          </div>
          {% endif %} {% for boulder in boulder_list %}
          <div class="card">
            <div class="row">
              <div
                class="dot"
                style="background-color: {{ boulder['difficulty'] }};"
              ></div>
              <!-- TODO: Add safename field to boulder -->
              <div style="padding-left: 0.5rem;">
                <form action="/load_boulder" method="post">
                  <input
                    type="hidden"
                    name="boulder_data"
                    id="holds-array"
                    value="{{boulder}}"
                  />
                  <button
                    type="submit"
                    name="boulder"
                    value="{{ boulder['name'] }}"
                    class="btn-link"
                  >
                    <h5>{{boulder['name']}}</h5>
                  </button>
                </form>
              </div>
            </div>
            <ul>
              <li>Section: {{boulder["section"]}}</li>
              <li>Creator: {{boulder["creator"]}}</li>
              <li>Feet: {{boulder["feet"]}}</li>
              <li>
                <div class="container">
                  <div class="row d-flex justify-content-center">
                    <div class="col-lg-12 d-flex justify-content-left">
                      <div class="star-rating-fixed">
                        <span class="fa fa-star" data-rating="1"></span>
                        <span class="fa fa-star" data-rating="2"></span>
                        <span class="fa fa-star" data-rating="3"></span>
                        <span class="fa fa-star" data-rating="4"></span>
                        <span class="fa fa-star" data-rating="5"></span>
                        <input
                          type="hidden"
                          name="boulder_rating"
                          class="rating-value"
                          value="{{ boulder.get('rating', 0) }}"
                        />
                      </div>
                      <p style="margin-left: 10px; margin-top: 0px;">
                        {{ boulder.get('raters', 0) }} ratings
                      </p>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </body>
</html>

<script>
var SetRatingStar = function () {
  return $star_rating.each(function () {
    if (
      parseInt($star_rating.siblings("input.rating-value").val()) >=
      parseInt($(this).data("rating"))
    ) {
      return $(this).removeClass("fa").removeClass("fa-star").addClass("fas").addClass("fa-star");
    } else {
      return $(this).removeClass("fas").removeClass("fa-star").addClass("fa").addClass("fa-star");
    }
  });
};

SetRatingStar();
$(document).ready(function () {});
</script>

<style>
  /* https://stackoverflow.com/questions/47702879/bootstrap-4-hex-colors-for-rails-app */
  .btn-link {
    border: none;
    outline: none;
    background: none;
    cursor: pointer;
    color: #007bff;
    padding: 0;
    font-family: inherit;
    font-size: inherit;
  }
  .dot {
    height: 25px;
    width: 25px;
    border-radius: 50%;
    position: relative;
    display: inline-block;
  }
  .card {
    border: 0.1em solid dimgray;
    padding: 0.5em;
    padding-left: 1.2em;
    margin: 0.5em;
  }
  .star-rating-fixed .fas {
    color: yellow;
  }

</style>
